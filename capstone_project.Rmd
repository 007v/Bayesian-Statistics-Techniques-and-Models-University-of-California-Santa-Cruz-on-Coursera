---
title: "Course Capstone Project"
author: "Lytemar"
date: "October 9, 2017"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

## Introduction

The data set that we will analyze is the opening response time (ms) of an electromechanical valve.
The valve controls the flow of several fluids where the opening and closing is actuated by a solenoid.
The shutoff seal is an elastomer that is attached to the end of the solenoid plunger.
In this project, we will determine how the seal vintage, fluid and applied coil voltage affects the valve's opening response time.

## Exploratory Data Analysis

The summary of the data set is

```{r read in data and summary}
library(rjags)
library(ggplot2)
df = read.csv('capstone_data_set.csv')
df = df[, -c(1,2)]
df$Voltage = as.factor(df$Voltage)
summary(df)
str(df)
```

where *Valve.Rev* indicates the revision of the valve design, *Fluid* indicates the different fluids as masked factors, *Time.Between.Actuations_hr* indicates the time between valve actuations in hours, *\*.Age* indicates the age of the indicated component, *voltage* is the applied DC solenoid coil voltage, *Seal.Type* indicates the types of seal materials as masked factors, and *Response.Time_ms* is the time to open the valve in ms.

### Plots

In the interest of report length, we show the following two density plots that illustrate the distribution of response time, overall and grouped by voltage, respectively.
Here, we see that the distribution of response time is right-skewed.
A candidate mixture model of Gaussian and uniform distributions may be applicable. 
Additionally, box plots of response time versus the other variables would show how response time varies due to the other variables in the data set.


```{r pairs plot of data}
#library(GGally)
#ggpairs(df[,c(1,2,6,9)], aes(color=Voltage, alpha=0.4))

p <- ggplot(data=df, aes(x=Response.Time_ms))
p <- p + geom_density()
print(p)

p <- ggplot(data=df, aes(x=Response.Time_ms, color=Voltage, group=Voltage))
p <- p + geom_density()
print(p)

#p <- ggplot(df, aes(Voltage, Response.Time_ms))
#p <- p + geom_boxplot(outlier.colour = "red", outlier.shape = 1, aes(color=Fluid))
#p <- p + + geom_jitter(width=0.2)
#print(p)
```

## Modeling

Here we will fit a Bayesian linear regression model with interactions.
Then, we will see which predictors affect response time.
Finally, we will compute the probability that the response time is less than 100 ms given Voltage from our MCMC results.
